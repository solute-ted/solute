<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solute | 가구가 공간에 녹아드는 순간</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;500&family=Playfair+Display:ital,wght@0,600;1,600&display=swap');

        :root {
            --bg-color: #fcfcfc; 
            --primary-dark: #1a1a1a;
            --accent-green: #4a5d4e;
        }

        /* [iOS 최적화] 터치 하이라이트 제거 및 폰트 매끄럽게 */
        * { 
            margin: 0; padding: 0; box-sizing: border-box; 
            -webkit-tap-highlight-color: transparent; 
            -webkit-font-smoothing: antialiased;
        }
        
        body, html { 
            height: 100%; 
            width: 100%;
            overflow: hidden; 
            background-color: var(--bg-color); 
            font-family: 'Noto Sans KR', sans-serif; 
        }

        /* [iOS 최적화] 로딩 오버레이: 아이폰 잔상 및 굳음 방지 */
        #loading-overlay {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background-color: #fcfcfc; /* 배경색 */
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 99999; /* 최상단에 위치 */
            opacity: 0;
            visibility: hidden;
            /* 0.4초는 너무 느릴 수 있으니 0.2초 정도로 빠르게 나타나게 합니다 */
            transition: opacity 0.2s ease-in-out, visibility 0.2s ease-in-out;
        }

        #loading-overlay.is-loading {
            opacity: 1 !important;
            visibility: visible !important;
        }
        .loading-text {
            font-family: 'Playfair Display', serif;
            font-size: 1rem;
            letter-spacing: 3px;
            color: var(--primary-dark);
        }

        /* 네비게이션 - iOS 하드웨어 가속 적용 */
        header {
            position: fixed;
            top: 0; width: 100%;
            display: flex; justify-content: space-between; align-items: center;
            padding: 40px 60px;
            z-index: 100;
            transform: translateZ(0); /* 레이어 분리로 렉 방지 */
        }
        .logo { font-family: 'Playfair Display', serif; font-size: 1.8rem; font-weight: 600; letter-spacing: 3px; }
        nav a { text-decoration: none; color: var(--primary-dark); margin-left: 40px; font-size: 0.85rem; letter-spacing: 1px; font-weight: 500; }

        /* 메인 히어로 섹션 */
        .hero-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            background-color: var(--bg-color);
        }

        .spline-background {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: 1;
            background-color: var(--bg-color);
        }

        .spline-background iframe {
            width: 100%;
            height: 100%;
            border: none;
            transform: scale(1.01);
            cursor: pointer;
            /* iOS 최적화: 터치 액션 제어 */
            touch-action: none;
        }

        /* 히어로 콘텐츠 - iOS 하드웨어 가속 적용 */
        .hero-content {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%) translateZ(0);
            z-index: 2;
            text-align: center;
            pointer-events: none;
        }

        .hero-content h1 {
            font-family: 'Playfair Display', serif;
            font-size: 5rem;
            color: var(--primary-dark);
            line-height: 1.1;
            margin-bottom: 20px;
            text-shadow: 0 0 30px rgba(255,255,255,1); 
        }

        .hero-content p {
            font-size: 1.1rem;
            letter-spacing: 2px;
            color: var(--accent-green);
            font-weight: 300;
        }

        .scroll-indicator {
            position: absolute;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 2;
            font-size: 0.7rem;
            letter-spacing: 3px;
            color: #aaa;
            text-transform: uppercase;
        }

        @media (max-width: 768px) {
            header { padding: 30px 25px; }
            .hero-content h1 { font-size: 3rem; }
        }
    </style>
</head>
<body>

    <div id="loading-overlay">
        <div class="loading-text">SOLUTE</div>
    </div>

    <header>
        <div class="logo">Solute</div>
        <nav>
            <a href="shop.html">SHOP</a>
            <a href="#">CART</a>
        </nav>
    </header>

    <main class="hero-container">
        <div class="spline-background">
            <iframe src="https://my.spline.design/3dstackcopycopycopycopy-JmAuSYykJNAnClHAeAwUes9v-fDk/" frameborder="0"></iframe>
        </div>

        <div class="hero-content">
            <p>RECYCLE & MODULE</p>
            <h1>Solute</h1>
        </div>

        <div class="scroll-indicator">Scroll to Explore</div>
    </main>

    <script>
        const overlay = document.getElementById('loading-overlay');

        // [핵심] 페이지 전환 함수
        function handleTransition(url) {
            // 1. 먼저 로딩 화면을 띄웁니다.
            overlay.classList.add('is-loading');

            // 2. 브라우저가 로딩 화면을 그릴 시간을 준 뒤(requestAnimationFrame),
            // 1초(1000ms) 뒤에 페이지를 이동시킵니다.
            setTimeout(() => {
                window.location.href = url;
            }, 1000); 
        }

        // 1. 상단 메뉴(SHOP 등) 클릭 시
        document.querySelectorAll('nav a').forEach(link => {
            link.addEventListener('click', function(e) {
                const targetUrl = this.getAttribute('href');
                if (targetUrl && targetUrl !== '#' && !targetUrl.includes('mailto')) {
                    e.preventDefault();
                    handleTransition(targetUrl);
                }
            });
        });

        // 2. Spline 레이어 클릭 감지 (가장 중요)
        // 배포 환경에서는 Spline 내부 클릭을 직접 가로채기 어려우므로, 
        // 브라우저의 '포커스 아웃'과 '페이지 떠남'을 감지하여 로딩을 즉시 띄웁니다.
        window.addEventListener('blur', () => {
            overlay.classList.add('is-loading');
        });

        window.addEventListener('beforeunload', () => {
            overlay.classList.add('is-loading');
        });

        // 3. 페이지가 로드되거나 돌아왔을 때 로딩 해제
        window.addEventListener('pageshow', (event) => {
            overlay.classList.remove('is-loading');
        });
    </script>
</body>
</html>
